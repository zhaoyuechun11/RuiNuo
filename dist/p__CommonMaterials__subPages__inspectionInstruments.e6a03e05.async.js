(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"7Qib":function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return h})),a.d(t,"c",(function(){return f}));a("kZID");var n=a("L0Kt"),r=a.n(n);console.log("development","REACT_APP_ENV_envjs"),console.log("development","NODE_ENVjs");var l={development:{apiurl_one:"https://da.hire66.com",apiurl_two:"https://dw.hire66.com",apiurl_three:"https://dh.hire66.com/#/",api_pdf:"https://h.hire66.com",api_pdf_windows:"https://bc.hire66.com/onlinePreview",apiurl_website:"https://dwww.hire66.com/",apiurl_web:"http://211.149.238.180:8080/rnlims"},production:{apiurl_web:"https://a.hire66.com",apiurl_one:"https://a.hire66.com",apiurl_two:"https://w.hire66.com",apiurl_three:"https://h.hire66.com/#/",apiurl_website:"https://hire66.com/",api_pdf:"https://h.hire66.com",api_pdf_windows:"https://bc.hire66.com/onlinePreview"}},c=l["development"];a("uv+w"),a("5Tzl");r.a.locale("zh-cn");var i={};function o(e){e.customConfig.uploadFileName="file",e.customConfig.uploadImgMaxSize=10485760,e.customConfig.uploadImgServer=c.apiurl_web+"/file/upload",e.customConfig.uploadImgHeaders={Authorization:"".concat(localStorage.getItem("access_token"))},e.customConfig.uploadImgHooks={success:function(e,t,a){},fail:function(e,t,a){},error:function(e,t){},customInsert:function(e,t,a){var n=t.data.fileServerUrl;e(n)}}}var s=(e,t)=>{var a=document.createElement("a");a.download="".concat(t,".xls"),a.style.display="none",a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)},d=(e,t)=>(null===e||void 0===e||e.forEach((function(e){e.url===t?(i=e,console.log("item",e)):e.children&&e.children.length>0&&(i=d(e.children,t))})),i),u=e=>{for(var t=[],a=0,n=null===e||void 0===e?void 0:e.length;a<n;a++)if(!e[a].parentId){var r=m(e[a],e);t.push(r)}return t},m=(e,t)=>{for(var a=[],n=[],r=0,l=t.length;r<l;r++){if(t[r].parentId===e.id&&"button"!==t[r].type){var c=m(t[r],t);a.push(c)}if(t[r].parentId===e.id&&"button"===t[r].type){var i=m(t[r],t);n.push(i)}}return a.length&&(e.children=a),n.length&&(e.btn=n),e};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.concat(t).filter(((e,t,a)=>a.indexOf(e)===a.lastIndexOf(e)))}function p(e,t){for(var a=0;a<e.length;a++){if(e[a].value==t)return e[a];if(e[a].children&&e[a].children.length>0){var n=p(e[a].children,t);if(n)return n}}return null}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).forEach((a=>{t.push(e[a].value),e[a].children&&e[a].children.length&&h(e[a].children,t)})),t}var f=(e,t)=>{for(var a=[],n=0;n<t.length;n++){var r=t[n];if(a=[],a.push(r.value),e==r.value)return a;if(r.children&&r.children.length>0&&(a=a.concat(f(e,r.children)),a.includes(e)))return a}}},J15Z:function(e,t,a){e.exports={operateBtns:"operateBtns___2GwxP","card-container":"card-container___3K2Xr","ant-tabs-card":"ant-tabs-card___2BZWV","ant-tabs-content":"ant-tabs-content___HvM_g","ant-tabs-tabpane":"ant-tabs-tabpane___4Ht0Q","ant-tabs-bar":"ant-tabs-bar___3u3hP","ant-tabs-tab":"ant-tabs-tab___280CT","ant-tabs-tab-active":"ant-tabs-tab-active___fViX8"}},ieAn:function(e,t,a){"use strict";a.r(t);a("jv72");var n=a("Yldp"),r=(a("XcY9"),a("vR6W")),l=(a("xmLm"),a("w4zM")),c=a("kZID"),i=a("0gua"),o=(a("qXGC"),a("5vqk")),s=a("xwgP"),d=a.n(s),u=a("9kvl"),m=a("q5+0"),b=a("7Qib"),p=a("VMQ7"),h=a("Kvkj"),f=a("3/+1"),g=a("J15Z"),O=a.n(g),j=a("q2e5"),v=(a("yqVl"),a("kP1m")),E={labelCol:{span:4},wrapperCol:{span:18}},w=v["a"].Option,C=e=>{var t=e.Ref,a=e.refresh,o=Object(s["useRef"])(),u=n["a"].useForm(),m=Object(i["a"])(u,1),b=m[0],p=Object(s["useState"])([]),g=Object(i["a"])(p,2),O=g[0],C=g[1],y=Object(s["useState"])([]),I=Object(i["a"])(y,2),k=I[0],_=I[1],x=Object(s["useState"])(),S=Object(i["a"])(x,2),N=S[0],R=S[1];Object(s["useImperativeHandle"])(t,(()=>({show:e=>{T(),q(),o.current&&o.current.show(),e?(b.setFieldsValue(Object(c["a"])({},e)),R(e.id)):(R(null),b&&b.resetFields())},hide:()=>{o.current&&o.current.hide()}})));var z=()=>{b.validateFields().then((e=>{N?Object(f["dc"])(Object(c["a"])({id:N},e)).then((e=>{200===e.code&&(l["default"].success("\u4fee\u6539\u6210\u529f"),o.current&&o.current.hide(),a())})):Object(f["A"])(Object(c["a"])({},e)).then((e=>{200===e.code&&(l["default"].success("\u6dfb\u52a0\u6210\u529f"),o.current&&o.current.hide(),a())}))}))},T=()=>{Object(f["Mb"])().then((e=>{200===e.code&&C(e.data)}))},q=()=>{Object(f["Nb"])({type:"YQYMLX"}).then((e=>{200===e.code&&_(e.data)}))};return d.a.createElement(h["e"],{ref:o,width:640,title:N?"\u7f16\u8f91":"\u65b0\u589e",onCancel:()=>{o.current&&o.current.hide()},onOk:z},d.a.createElement(n["a"],Object(j["a"])({form:b},E,{style:{paddingTop:"20px"}}),d.a.createElement(n["a"].Item,{label:"\u8d44\u4ea7\u7f16\u53f7",name:"assetsNo"},d.a.createElement(r["a"],{style:{backgroundColor:"#ffffff"},maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u7f16\u53f7"})),d.a.createElement(n["a"].Item,{label:"\u4eea\u5668\u578b\u53f7",name:"instType",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4eea\u5668\u578b\u53f7"}]},d.a.createElement(r["a"],{style:{backgroundColor:"#ffffff"},maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4eea\u5668\u578b\u53f7"})),d.a.createElement(n["a"].Item,{label:"\u4eea\u5668\u4ee3\u53f7",name:"instrCode",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4eea\u5668\u4ee3\u53f7"}]},d.a.createElement(r["a"],{style:{backgroundColor:"#ffffff"},maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4eea\u5668\u4ee3\u53f7"})),d.a.createElement(n["a"].Item,{label:"\u4eea\u5668\u540d\u79f0",name:"instrName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4eea\u5668\u540d\u79f0"}]},d.a.createElement(r["a"],{style:{backgroundColor:"#ffffff"},maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u4eea\u5668\u540d\u79f0"})),d.a.createElement(n["a"].Item,{label:"\u6ce8\u518c\u7801",name:"regCode"},d.a.createElement(r["a"],{style:{backgroundColor:"#ffffff"},maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u6ce8\u518c\u7801"})),d.a.createElement(n["a"].Item,{name:"labClassManageId",label:"\u7ba1\u7406\u5206\u7c7b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5206\u7c7b"}]},d.a.createElement(v["a"],{placeholder:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5206\u7c7b",autoComplete:"off",allowClear:!0},O.map((e=>d.a.createElement(w,{value:e.id,key:e.id},e.name))))),d.a.createElement(n["a"].Item,{name:"pageTypeId",label:"\u4eea\u5668\u7c7b\u578b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4eea\u5668\u7c7b\u578b"}]},d.a.createElement(v["a"],{placeholder:"\u8bf7\u9009\u62e9\u4eea\u5668\u7c7b\u578b",autoComplete:"off",allowClear:!0},k.map((e=>d.a.createElement(w,{value:e.id,key:e.id},e.dictValue)))))))},y=C,I=(a("a3lY"),a("5kqx")),k=(a("wADL"),a("btVT")),_=(a("5xae"),a("0zoc")),x=e=>{var t=e.Ref,a=e.refresh,n=Object(s["useRef"])(),r=Object(s["useState"])([]),c=Object(i["a"])(r,2),o=c[0],u=c[1],m=Object(s["useRef"])(),b=Object(s["useRef"])(),p=Object(s["useState"])([]),g=Object(i["a"])(p,2),O=g[0],j=g[1];Object(s["useImperativeHandle"])(t,(()=>({show:e=>{n.current&&n.current.show(),b.current=e,E(),v(e)},hide:()=>{n.current&&n.current.hide()}})));var v=e=>{Object(f["jb"])({instrId:e}).then((e=>{200===e.code&&j(e.data)}))},E=()=>{Object(f["Jb"])().then((e=>{e.code&&u(e.data)}))},w=()=>{var e={labClassIds:m.current,instrId:b.current};Object(f["x"])(e).then((e=>{200===e.code&&(l["default"].success("\u7ed1\u5b9a\u6210\u529f"),n.current&&n.current.hide(),a())}))},C=e=>{m.current=e,j(e)};return d.a.createElement(h["e"],{ref:n,width:864,title:"\u7ed1\u5b9a",onCancel:()=>{n.current&&n.current.hide()},onOk:w},d.a.createElement(_["a"].Group,{style:{width:"100%",maxHeight:"500px",overflowY:"scroll",margin:"20px 10px"},onChange:C,value:O},d.a.createElement(I["a"],null,o.map((e=>d.a.createElement(k["a"],{span:8,key:e.id},d.a.createElement(_["a"],{value:e.id},e.className)))))))},S=x,N=(a("5uKM"),a("HKXf")),R=a("JrZZ"),z=a("duuc"),T={labelCol:{span:4},wrapperCol:{span:18}},q=v["a"].Option,F=e=>{var t=e.Ref,a=e.refresh,r=e.parent,o=Object(s["useRef"])(),u=n["a"].useForm(),m=Object(i["a"])(u,1),b=m[0],p=Object(s["useState"])(),g=Object(i["a"])(p,2),O=g[0],E=g[1],w=Object(s["useState"])([]),C=Object(i["a"])(w,2),y=C[0],I=C[1];Object(s["useImperativeHandle"])(t,(()=>({show:function(){var e=Object(z["a"])(Object(R["a"])().mark((function e(t){return Object(R["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.current&&o.current.show(),b&&b.resetFields(),_(),t?(b.setFieldsValue(Object(c["a"])({},t)),E(t.id)):E(null);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),hide:()=>{o.current&&o.current.hide()}})));var k=()=>{b.validateFields().then((e=>{O?Object(f["Rb"])(Object(c["a"])({id:O,instrId:r.id},e)).then((e=>{200===e.code&&(l["default"].success("\u4fee\u6539\u6210\u529f"),o.current&&o.current.hide(),a())})):Object(f["Pb"])(Object(c["a"])(Object(c["a"])({},e),{},{instrId:r.id})).then((e=>{200===e.code&&(l["default"].success("\u6dfb\u52a0\u6210\u529f"),o.current&&o.current.hide(),a())}))}))},_=()=>{Object(f["Wb"])().then((e=>{200===e.code&&I(e.data)}))};return d.a.createElement(h["e"],{ref:o,width:640,title:O?"\u7f16\u8f91":"\u65b0\u589e",onCancel:()=>{o.current&&o.current.hide()},onOk:k},d.a.createElement(n["a"],Object(j["a"])({form:b},T,{style:{paddingTop:"20px"}}),d.a.createElement(n["a"].Item,{name:"labItemId",label:"\u62a5\u544a\u9879\u76ee",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62a5\u544a\u9879\u76ee"}]},d.a.createElement(v["a"],{placeholder:"\u8bf7\u9009\u62e9\u62a5\u544a\u9879\u76ee",allowClear:!0},y.map((e=>d.a.createElement(q,{value:e.id,key:e.id},e.itemName))))),d.a.createElement(n["a"].Item,{label:"\u987a\u5e8f",name:"seq"},d.a.createElement(N["a"],null))))},L=F,P=v["a"].Option,V=e=>{var t=e.parent,a=e.btnPermissions,r=Object(u["d"])(),o=Object(s["useState"])(1),m=Object(i["a"])(o,2),b=m[0],g=m[1],j=Object(s["useState"])(0),E=Object(i["a"])(j,2),w=E[0],C=E[1],y=Object(s["useState"])(10),I=Object(i["a"])(y,2),k=I[0],_=I[1],x=Object(s["useState"])("account_integral"),S=Object(i["a"])(x,2),N=S[0],R=(S[1],Object(s["useState"])("asc")),z=Object(i["a"])(R,2),T=z[0],q=(z[1],Object(u["e"])((e=>e.loading.global))),F=Object(s["useRef"])(),V=Object(s["useState"])([]),M=Object(i["a"])(V,2),H=M[0],Z=M[1],A=Object(s["useState"])([]),D=Object(i["a"])(A,2),K=D[0],B=D[1],J=[{title:"\u987a\u5e8f",dataIndex:"seq",align:"center"},{title:"\u9879\u76ee\u7f16\u7801",dataIndex:"labItemCode",align:"center"},{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"labItemName",align:"center"},{title:"\u64cd\u4f5c",align:"center",render:e=>d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},null===a||void 0===a?void 0:a.map((t=>d.a.createElement(d.a.Fragment,null,"printDelete"===t.mark?d.a.createElement(h["b"],{style:{margin:"0 8px"},onClick:()=>{U(e.id)}},"\u5220\u9664"):"printEdit"===t.mark?d.a.createElement(h["b"],{style:{margin:"0 8px"},onClick:()=>{F.current.show(e,"edit")}},"\u7f16\u8f91"):null))))}],Q=Object(s["useCallback"])((e=>{r({type:"commonMaterials/fetchPrintOrder",payload:Object(c["a"])(Object(c["a"])({},e),{},{callback:e=>{200===e.code&&(B(e.data.records),C(e.data.total))}})})}),[r,N,T]);Object(s["useEffect"])((()=>{t&&(Q({pageNum:b,pageSize:k,instrId:t.id}),W())}),[b,k,t]);var X=(e,t,a)=>{console.log("pagination",e),console.log("filters",t),console.log("sorter",a)},Y=(e,t)=>{g(e),_(t)},G=(e,a)=>{var n=Object(c["a"])({pageNum:b,pageSize:k,instrId:t.id},a);Q(n)},U=e=>{Object(f["Qb"])({ids:[e]}).then((e=>{200===e.code&&(l["default"].success("\u5220\u9664\u6210\u529f"),Q({pageNum:b,pageSize:k,instrId:t.id}))}))},W=()=>{Object(f["ac"])().then((e=>{200===e.code&&Z(e.data)}))},$=()=>d.a.createElement(n["a"],{onValuesChange:G,layout:"inline",className:O.a.search_box},d.a.createElement(n["a"].Item,{name:"instrId"},d.a.createElement(v["a"],{placeholder:"\u8bf7\u9009\u62e9\u4eea\u5668",autoComplete:"off",allowClear:!0},H.map((e=>d.a.createElement(P,{value:e.id,key:e.id},e.instrName))))));return d.a.createElement(d.a.Fragment,null,null===a||void 0===a?void 0:a.map((e=>"printAdd"===e.mark&&d.a.createElement("div",{className:O.a.operateBtns},d.a.createElement(h["b"],{btnType:"primary",onClick:()=>{F.current.show()}},d.a.createElement(p["a"],{style:{marginRight:4}}),"\u65b0\u589e")))),$(),d.a.createElement(h["h"],{columns:J,rowKey:"id",handleTableChange:X,loading:q,pagination:{current:b,pageSize:k,total:w,onChange:Y,showTotal:(e,t)=>"\u5171 ".concat(e," \u6761")},dataSource:K}),d.a.createElement(L,{Ref:F,instrList:H,parent:t,refresh:()=>Q({pageNum:b,pageSize:k,instrId:t.id})}))},M=V,H=o["a"].TabPane,Z=()=>{var e=Object(u["d"])(),t=Object(m["k"])(),a=Object(s["useState"])(1),g=Object(i["a"])(a,2),j=g[0],v=g[1],E=Object(s["useState"])(0),w=Object(i["a"])(E,2),C=w[0],I=w[1],k=Object(s["useState"])(10),_=Object(i["a"])(k,2),x=_[0],N=_[1],R=Object(s["useState"])("account_integral"),z=Object(i["a"])(R,2),T=z[0],q=(z[1],Object(s["useState"])("asc")),F=Object(i["a"])(q,2),L=F[0],P=(F[1],Object(u["e"])((e=>e.loading.global))),V=Object(u["e"])((e=>e.global)),Z=V.useDetail,A=Object(s["useRef"])(),D=Object(s["useRef"])(),K=Object(s["useRef"])(),B=Object(s["useState"])([]),J=Object(i["a"])(B,2),Q=J[0],X=J[1],Y=Object(s["useState"])(),G=Object(i["a"])(Y,2),U=G[0],W=G[1],$=Object(s["useState"])([]),ee=Object(i["a"])($,2),te=ee[0],ae=ee[1];console.log("location",t),console.log("useDetail",Z);var ne=[{title:"\u8d44\u4ea7\u7f16\u53f7",dataIndex:"assetsNo",align:"center"},{title:"\u4eea\u5668\u578b\u53f7",dataIndex:"instType",align:"center"},{title:"\u4eea\u5668\u4ee3\u53f7",dataIndex:"instrCode",align:"center"},{title:"\u4eea\u5668\u540d\u79f0",dataIndex:"instrName",align:"center"},{title:"\u7ba1\u7406\u5206\u7c7b\u540d\u79f0",dataIndex:"labClassManageName",align:"center"},{title:"\u5b9e\u9a8c\u5ba4\u7f16\u7801",dataIndex:"labId",align:"center"},{title:"\u4eea\u5668\u7c7b\u578b",dataIndex:"pageTypeName",align:"center"},{title:"\u6ce8\u518c\u7801",dataIndex:"regCode",align:"center"},{title:"\u64cd\u4f5c",align:"center",render:e=>d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},null===te||void 0===te?void 0:te.map((t=>d.a.createElement(d.a.Fragment,null,"edit"===t.mark?d.a.createElement(h["b"],{style:{margin:"0 8px"},onClick:()=>{D.current.show(e)}},"\u4fee\u6539"):"delete"===t.mark?d.a.createElement(h["b"],{style:{margin:"0 8px"},onClick:()=>{ue(e.id)}},"\u5220\u9664"):"bind"===t.mark?d.a.createElement(h["b"],{style:{margin:"0 8px"},onClick:()=>{A.current.show(e.id)}},"\u7ed1\u5b9a"):null))),d.a.createElement(h["b"],{onClick:()=>{me(e)}},"\u660e\u7ec6"))}],re=Object(s["useCallback"])((t=>{e({type:"commonMaterials/fetchInstrList",payload:Object(c["a"])(Object(c["a"])({},t),{},{callback:e=>{200===e.code&&(X(e.data.records),I(e.data.total))}})})}),[e,T,L]);Object(s["useEffect"])((()=>{if(re({pageNum:j,pageSize:x}),Z){var e=Object(b["d"])(Object(b["g"])(Z.permissions),t.pathname),a=e.btn;ae(a)}}),[j,x,Z]);var le=(e,t,a)=>{console.log("pagination",e),console.log("filters",t),console.log("sorter",a)},ce=(e,t)=>{v(e),N(t)},ie=(e,t)=>{K.current=t;var a=Object(c["a"])({pageNum:j,pageSize:x},t);re(a)},oe=()=>{D.current&&D.current.show()},se=()=>{},de=()=>{Object(f["Gb"])(Object(c["a"])({},K.current)).then((e=>{var t=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"}),a=URL.createObjectURL(t);Object(b["a"])(a,"\u4eea\u5668\u7ef4\u62a4")}))},ue=e=>{Object(f["Z"])({ids:[e]}).then((e=>{200===e.code&&(re({pageNum:j,pageSize:x}),l["default"].success("\u5220\u9664\u6210\u529f"))}))},me=e=>{W(e)},be=()=>d.a.createElement(n["a"],{onValuesChange:ie,layout:"inline"},d.a.createElement(n["a"].Item,{name:"code"},d.a.createElement(r["a"],{placeholder:"\u8bf7\u8f93\u5165\u4eea\u5668\u4ee3\u53f7",autoComplete:"off",suffix:d.a.createElement(h["f"],{name:"icongongzuotai-sousuo"}),allowClear:!0})),d.a.createElement(n["a"].Item,{name:"name"},d.a.createElement(r["a"],{placeholder:"\u8bf7\u8f93\u5165\u4eea\u5668\u540d\u79f0",autoComplete:"off",suffix:d.a.createElement(h["f"],{name:"icongongzuotai-sousuo"}),allowClear:!0})));return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:O.a.operateBtns},null===te||void 0===te?void 0:te.map((e=>"add"===e.mark?d.a.createElement(h["b"],{btnType:"primary",onClick:oe},d.a.createElement(p["a"],{style:{marginRight:4}}),"\u65b0\u589e"):"import"===e.mark?d.a.createElement(h["b"],{btnType:"primary",onClick:se},"\u5bfc\u5165"):"export"===e.mark?d.a.createElement(h["b"],{btnType:"primary",onClick:de},"\u5bfc\u51fa"):null))),be(),d.a.createElement(h["h"],{columns:ne,rowKey:"id",handleTableChange:le,loading:P,pagination:{current:j,pageSize:x,total:C,onChange:ce,showTotal:(e,t)=>"\u5171 ".concat(e," \u6761")},dataSource:Q}),d.a.createElement(S,{Ref:A,refresh:()=>re({pageNum:j,pageSize:x})}),d.a.createElement(y,{Ref:D,refresh:()=>re({pageNum:j,pageSize:x})}),d.a.createElement(o["a"],{type:"card"},d.a.createElement(H,{tab:"\u6253\u5370\u987a\u5e8f",key:"0"},d.a.createElement(M,{parent:U||Q[0],btnPermissions:te}))))};t["default"]=Z}}]);